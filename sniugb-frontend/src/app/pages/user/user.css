/* Paleta de colores del proyecto */
:root {
  --color-rojo: #BF0909;
  --color-azul: #0056AC;
  --color-verde: #128C7E;
  --color-texto: #26292E;
  --color-texto-sec: #6C757D;
  --color-fondo: #f8f9fa; /* Fondo gris claro */
  --color-blanco: #ffffff;
  --borde-color: #e9ecef; /* Borde sutil */
  --header-height: 80px; 
}

:host {
  display: block;
  background-color: var(--color-fondo);
  font-family: 'Lexend', sans-serif;
  font-weight: 400;
}

.dashboard-wrapper {
  display: grid;
  grid-template-columns: 400px 1fr;
  gap: 3rem;
  max-width: 1700px;
  margin: 0 auto;
  padding: 2.4rem;
}

/* --- Columna Izquierda (Fija/Sticky) --- */
.dashboard-sidebar {
  position: sticky;
  top: calc(var(--header-height) + 2.4rem);
  height: calc(100vh - var(--header-height) - 4.8rem);
  display: flex;
  flex-direction: column;
  gap: 2.4rem;
}

.card.card-sticky { display:flex; flex-direction:column; flex-grow:1; min-height:20rem; }
.calendar-widget { flex-grow:0; flex-shrink:0; }
.calendar-container { padding: 0 1.2rem 1.2rem 1.2rem !important; }

/* --- Columna Central --- */
.dashboard-main { min-width: 0; }

/* --- Tarjetas --- */
.card{
  background-color:var(--color-blanco);
  border-radius:12px;
  border:1px solid var(--borde-color);
  box-shadow:0 4px 12px rgba(0,0,0,.03);
  overflow:hidden;
}
.card-header{
  padding:1.6rem 2.4rem;border-bottom:1px solid var(--borde-color);
  display:flex;flex-direction:column;align-items:center;gap:1.6rem;
}
.card-header h3{ font-size:1.6rem;font-weight:600;color:var(--color-texto);margin:0; }
.card-body{ padding:2rem; }
.card-body-scrollable{ padding:0; overflow-y:auto; flex-grow:1; }

/* --- Selector de Predio --- */
.predio-selector-wrapper{
  margin-bottom:2.4rem;display:flex;align-items:center;gap:1rem;
  background:var(--color-blanco);border:1px solid var(--borde-color);
  padding:1.6rem 2rem;border-radius:12px;
}
.predio-selector-wrapper label{ font-size:1.4rem;font-weight:500;color:var(--color-texto-sec); }
.predio-selector-wrapper select{
  font-family:'Lexend',sans-serif;font-size:1.6rem;font-weight:600;
  padding:.8rem 1.2rem;border-radius:8px;border:1px solid #ced4da;
  background:var(--color-fondo);color:var(--color-azul);max-width:40rem;
}
.option-crear-nuevo{ font-style:italic;font-weight:500;color:var(--color-rojo);background:#fff8f8; }

/* --- 1. ESTILO KPIs --- */
.kpi-grid{ display:grid; grid-template-columns:repeat(5,1fr); gap:2rem; margin-bottom:3.2rem; }

/* Base */
.kpi-card{
  background:var(--color-blanco); border-radius:12px;
  border:2px solid var(--kpi-border, var(--borde-color));
  padding:1.2rem 2rem 2rem 2.5rem; position:relative; min-height:10.5rem;
  overflow:hidden; display:flex; flex-direction:column; align-items:flex-start;
  font-family:'Lexend',sans-serif;
}
/* Barra izquierda */
.kpi-card::before{
  content:""; position:absolute; left:-1px; top:-1px; bottom:-1px; width:12px;
  background:var(--kpi-color, var(--color-azul)); border-radius:12px;
}
/* Colores por KPI */
.kpi-card.kpi-hato       { --kpi-color:#0056AC; --kpi-border:rgba(0,86,172,.2); }
.kpi-card.kpi-alertas    { --kpi-color:#BF0909; --kpi-border:rgba(191,9,9,.2); }
.kpi-card.kpi-tareas     { --kpi-color:#EBA624; --kpi-border:rgba(235,166,36,.2); }
.kpi-card.kpi-produccion { --kpi-color:#79BF09; --kpi-border:rgba(121,191,9,.2); }
.kpi-card.kpi-transfer   { --kpi-color:#EBA624; --kpi-border:rgba(235,166,36,.2); }
/* Tipos de texto */
.kpi-card .kpi-label{ font-size:1.7rem; font-weight:500; color:#7D7F82; margin:0; }
.kpi-card .kpi-value{ margin-top:1.5rem; margin-left:2rem; font-size:3.5rem; font-weight:700; color:var(--color-texto); line-height:1.05; }
.kpi-card .kpi-subvalue{ display:block; margin-top:.5rem; font-size:2rem; margin-left:2.5rem; font-weight:600; color:var(--color-texto-sec); }
.kpi-card.kpi-alerta .kpi-value{ color:var(--color-rojo); }
.kpi-card.kpi-interactive{ cursor:pointer; transition:transform .2s ease, box-shadow .2s ease; }
.kpi-card.kpi-interactive:hover{ transform:translateY(-3px); box-shadow:0 8px 20px -4px rgba(0,86,172,.15); }
.kpi-card.skeleton{
  border-left-width:1px; background:linear-gradient(100deg,#f0f0f0 30%,#f8f8f8 50%,#f0f0f0 70%);
  background-size:400% 100%; animation:skeleton-loading 1.5s infinite linear;
}
@keyframes skeleton-loading{ 0%{background-position:200% 0} 100%{background-position:-200% 0} }

/* --- Panel de control --- */
.control-panel{ margin-bottom:2rem; }
.control-panel h3{ font-size:1.8rem; font-weight:600; color:var(--color-texto); margin-bottom:1.6rem; }
.control-buttons{ display:grid; grid-template-columns:repeat(5,1fr); gap:1.6rem; }
.control-btn{
  background:var(--color-blanco); border:2px solid #0056AC; border-radius:10px; padding:2rem; text-align:center;
  font-family:'Lexend',sans-serif; font-size:1.7rem; font-weight:500; color:#0056AC; cursor:pointer;
  transition:transform .2s ease, box-shadow .2s ease; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:1.2rem; min-height:12rem;
}
.control-btn img{ width:3.5rem; height:3.5rem; color:#0056AC; transition:none; }
.control-btn:hover{ background:var(--color-blanco); color:#0056AC; transform:translateY(-2px); box-shadow:0 6px 12px rgba(0,86,172,.12); }

/* --- NUEVO: Panel de Gestión --- */
.gestion-panel{ margin: 0 0 2.4rem 0; }
.gestion-panel h3{ font-size:1.8rem; font-weight:600; color:var(--color-texto); margin:0 0 1.6rem; }
.gestion-buttons{ display:grid; grid-template-columns:repeat(5,1fr); gap:1.6rem; }
.gestion-hint{ margin-top:1rem; color:var(--color-texto-sec); font-size:1.3rem; }

/* Iconos inline para botones de gestión */
.btn-ico{ width:3.5rem; height:3.5rem; display:block; }

/* --- 3. Tabla Mi Hato --- */
.table-container{ overflow-x:auto; padding:0; }
.hato-table-wrapper table{ width:100%; border-collapse:collapse; }
.hato-table-wrapper th, .hato-table-wrapper td{
  padding:1.4rem 1.6rem; text-align:left; border-bottom:1px solid var(--borde-color);
  font-size:1.4rem; font-weight:400; white-space:nowrap;
}
.hato-table-wrapper th{ background:var(--color-fondo); font-weight:500; color:var(--color-texto-sec); font-size:1.2rem; text-transform:uppercase; }
.hato-table-wrapper td{ color:var(--color-texto); }
.hato-table-wrapper tbody tr:last-child td{ border-bottom:none; }
.hato-table-wrapper tbody tr:hover{ background:#fcfcfc; }
.td-cui{ font-weight:600; color:var(--color-azul); }
.btn-ver-registro{
  background:none; border:1px solid var(--color-azul); color:var(--color-azul);
  padding:.6rem 1.2rem; border-radius:6px; font-weight:600; cursor:pointer; text-decoration:none;
  font-family:'Lexend',sans-serif; font-size:1.2rem; transition:all .2s ease;
}
.btn-ver-registro:hover{ background:var(--color-azul); color:var(--color-blanco); }
.status-badge{ padding:.4rem 1rem; border-radius:12px; font-size:1.2rem; font-weight:600; text-transform:capitalize; }
.status-badge.sano{ background:#e7f3f1; color:var(--color-verde); }
.status-badge.en-observación{ background:#fff8e1; color:#f57f17; }
.status-badge.enfermo{ background:#fce8e8; color:var(--color-rojo); }
.status-badge.status-activo{ background:#e7f3f1; color:var(--color-verde); }
.status-badge.status-en_papelera{ background:#f4f4f4; color:#777; }

/* --- ESTILO Centro de Actividades --- */
.tabs{ display:flex; justify-content:center; width:100%; border-bottom:1px solid var(--borde-color); margin:0 -2.4rem; padding:0 2.4rem; }
.tab-btn{
  background:none; border:none; padding:1.4rem 1.6rem; font-size:1.4rem; font-weight:500;
  color:var(--color-texto-sec); cursor:pointer; border-bottom:3px solid transparent; margin-bottom:-1px;
  font-family:'Lexend',sans-serif; flex-grow:1; text-align:center;
}
.tab-btn.active{ color:var(--color-azul); font-weight:600; border-bottom-color:var(--color-azul); }
.activity-list{ list-style:none; padding:0; margin:0; }
.activity-list li{
  display:flex; gap:1.2rem; padding:1.6rem 2rem; border-bottom:1px solid var(--borde-color);
  cursor:pointer; transition:background-color .2s ease;
}
.activity-list li:last-child{ border-bottom:none; }
.activity-list li p{ margin:0 0 4px 0; font-size:1.4rem; color:var(--color-texto); font-weight:500; }
.activity-list li .activity-time{ font-size:1.2rem; color:var(--color-texto-sec); }
.activity-list li.leida p, .activity-list li.leida .activity-time{ color:var(--color-texto-sec); font-weight:400; }
.activity-list li:hover{ background:#fcfcfc; }
.activity-icon{ width:3.2rem; height:3.2rem; border-radius:50%; flex-shrink:0; display:grid; place-items:center; background:#e6f0fa; color:var(--color-azul); }
.activity-icon svg{ width:1.8rem; height:1.8rem; }
.activity-icon.icon-notif{ background:#fff8e1; color:#f57f17; }
.recordatorio-item{ display:flex; gap:1.2rem; padding:1.2rem 2rem; border-bottom:1px solid var(--borde-color); }
.recordatorio-item:last-child{ border-bottom:none; }
.recordatorio-item label{ cursor:pointer; width:100%; }
.recordatorio-item label p{ margin:0 0 4px 0; font-size:1.4rem; color:var(--color-texto); font-weight:500; }
.recordatorio-item label .activity-time{ font-size:1.2rem; color:var(--color-texto-sec); }
.recordatorio-item input[type="checkbox"]{ width:1.8rem; height:1.8rem; margin-top:4px; flex-shrink:0; accent-color:var(--color-verde); }
.recordatorio-item label.completado p{ text-decoration:line-through; color:var(--color-texto-sec); font-weight:400; }
.empty-state{ text-align:center; color:var(--color-texto-sec); font-size:1.4rem; padding:2rem; }

/* =========================================
 * CALENDARIO FullCalendar (estilo "pills")
 * ======================================= */

/* Cabecera personalizada (tuya) */
.calendar-header-custom{
  padding:1.2rem 1.6rem; display:flex; align-items:center; justify-content:space-between;
  border-bottom:1px solid var(--borde-color);
}
.calendar-header-custom h2{
  margin:0; font-size:1.6rem; font-weight:700; letter-spacing:.3px; color:var(--color-texto);
}
.cal-nav{ display:flex; gap:.6rem; }
.cal-nav-btn{
  width:32px; height:32px; border-radius:8px; border:1px solid var(--borde-color);
  background:var(--color-blanco); color:var(--color-texto-sec); cursor:pointer; line-height:30px;
}
.cal-nav-btn:hover{ background:var(--color-fondo); color:var(--color-azul); }

/* Oculta header nativo de FullCalendar (usamos el tuyo) */
:host ::ng-deep .fc .fc-header-toolbar{ display:none !important; }

/* Contenedor */
:host ::ng-deep .fc .fc-view-harness{ background:var(--color-blanco); }
:host ::ng-deep .fc .fc-daygrid{ padding:.6rem; }

/* ===== FullCalendar — estilo tipo "pills" limpio en el TOP ===== */
.fc .fc-scrollgrid,
.fc .fc-scrollgrid-section,
.fc .fc-scrollgrid-sync-table { border: none !important; }
.fc .fc-scroller { overflow: visible !important; }

.fc .fc-col-header,
.fc .fc-col-header-cell { border: 0 !important; background: transparent !important; }
.fc .fc-col-header-cell-cushion { font-weight: 500; color: #8a8f96; font-size: 1.25rem; text-transform: none; }

.fc .fc-daygrid-day { border: 0 !important; padding: .35rem; }
.fc .fc-daygrid-day-frame { border-radius: 12px; }

.fc .fc-daygrid-day-top {
  display: flex; align-items: center; justify-content: center;
  height: 44px; border-radius: 999px; position: relative;
  transition: background .15s ease, color .15s ease;
}

.fc .fc-daygrid-day-number {
  display: inline-flex; align-items: center; justify-content: center;
  width: 40px; height: 40px; border-radius: 999px;
  font-weight: 600; font-size: 1.35rem; color: var(--color-texto);
  text-decoration: none; border: none !important; outline: none !important;
}

.fc .fc-daygrid-day:not(.fc-day-other):hover .fc-daygrid-day-top {
  background: rgba(0, 86, 172, .08);
}

.fc .fc-daygrid-day.is-selected .fc-daygrid-day-top { background: var(--color-azul); }
.fc .fc-daygrid-day.is-selected .fc-daygrid-day-number { color: var(--color-blanco); }

.fc .fc-day-sat .fc-daygrid-day-number,
.fc .fc-day-sun .fc-daygrid-day-number { color: #9aa0a6; }

.fc .fc-day-other .fc-daygrid-day-top { background: transparent !important; }
.fc .fc-day-other .fc-daygrid-day-number { color: #c0c4c8; }

.fc .fc-daygrid-day.has-events .fc-daygrid-day-top::after,
.fc .fc-daygrid-day.has-reminder .fc-daygrid-day-top::after {
  content: ""; position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%);
  width: 6px; height: 6px; border-radius: 50%;
}
.fc .fc-daygrid-day.has-events   .fc-daygrid-day-top::after { background: var(--color-azul); }
.fc .fc-daygrid-day.has-reminder .fc-daygrid-day-top::after { background: var(--color-verde); }

.fc .fc-daygrid-day-events,
.fc .fc-daygrid-day-bottom { display: none !important; }

.fc .fc-daygrid { padding: .6rem; background: var(--color-blanco); }

/* ---- Chips input (buscador con selección) ---- */
.chip-input{ position:relative; }
.chip-input .chips{
  display:flex; align-items:center; flex-wrap:wrap; gap:.6rem;
  min-height:40px; border:1px solid #ced4da; border-radius:6px; padding:.4rem .6rem;
  background:#fff;
}
.chip-input .chips input{
  border:none; outline:none; height:32px; flex:1 1 120px; font-family:'Lexend',sans-serif;
}
.chip{
  background:#eef5ff; color:#0056AC; border:1px solid rgba(0,86,172,.2);
  padding:.2rem .8rem; border-radius:999px; font-size:1.3rem; display:inline-flex; align-items:center; gap:.4rem;
}
.chip button{
  background:none; border:none; cursor:pointer; color:#0056AC; font-weight:700; line-height:1; font-size:1.4rem;
}
.chip-input .suggestions{
  position:absolute; left:0; right:0; top:100%; z-index:5;
  background:#fff; border:1px solid #e9ecef; border-radius:8px; margin-top:.4rem; max-height:220px; overflow:auto;
  box-shadow:0 6px 20px rgba(0,0,0,.08);
}
.chip-input .suggestions li{
  padding:.8rem 1rem; cursor:pointer; font-size:1.4rem;
}
.chip-input .suggestions li:hover{ background:#f6f9ff; }
.chip-input.single .chips .chip{ margin-right:.4rem; }
